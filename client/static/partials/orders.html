<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Orders</title>
  </head>
  <body>
    <div class="container-fluid" ng-controller='ordersController'>
      <u>Add a new order</u><br><br>
      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            Customer: <select class="form-control" ng-model='newOrder.customer' ng-options='customer.name for customer in customers'>
                      <option value="" disabled>Select One</option>
                      </select>
              <br>
              <div class="row">
                <div class="form-inline col-md-12">
                  Order: <select class="form-control" ng-model='newOrder.product' ng-options='product.name for product in products' ng-change='new()'>
                          <option value="" disabled>Select One</option>
                          </select>
                          <span ng-if="selection">
                            Quantity  <select class="form-control" ng-model='newOrder.quantity' ng-options='quantity for quantity in quantities'>
                                    <option value="" disabled>Select One</option>
                                    </select>
                          </span>
                          <!-- <pre>{{newOrder.product | json}}</pre> -->
                </div>
              </div>
              <br>
            <button type="button" class="btn btn-primary" ng-click='addOrder()'>Order</button>
            <hr>
            <span ng-if="errors" style="color:red" ng-repeat='error in errors'>{{error}}</span>
            <input type="text" class="form-control" ng-model='filter_name' placeholder="filter">
          </div>
        </div>
      </div>
      <br>
      <br>
      <div class="row">
        <div class="col-md-6">
          <table class="table table-striped table-bordered">
            <tr>
              <th>Customer Name</th>
              <th>Product</th>
              <th>Quantity</th>
              <th>Date</th>
            </tr>
            <tr ng-repeat='order in orders | filter: filter_name track by $index'>
              <th>{{order.customer}}</th>
              <th>{{order.product}}</th>
              <th>{{order.quantity}}</th>
              <th>{{order.created_at | date:'MMMM dd, yyyy'}}</th>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </body>
</html>
